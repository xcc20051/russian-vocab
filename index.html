<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¿„è¯­ç¬¬16è¯¾ Â· å…¨èƒ½èƒŒè¯ç‰ˆ</title>
<style>
    :root {
        --primary: #3498db;
        --secondary: #95a5a6;
        --accent: #e67e22;
        --error: #e74c3c;
        --success: #27ae60;
    }
    body {
        font-family: "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
        background: #f4f6f8;
        padding: 20px;
        color: #222;
        max-width: 800px;
        margin: 0 auto;
    }
    h1 { text-align: center; color: #2c3e50; }
    
    .controls {
        text-align: center;
        margin-bottom: 20px;
        position: sticky;
        top: 0;
        z-index: 100;
        background: rgba(244, 246, 248, 0.95);
        padding: 15px;
        border-bottom: 2px solid #ddd;
        border-radius: 0 0 10px 10px;
    }
    
    button {
        background: var(--primary);
        color: white;
        border: none;
        padding: 10px 15px;
        margin: 5px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: 0.2s;
    }
    button:hover { opacity: 0.9; transform: translateY(-1px); }
    button.secondary { background: var(--secondary); }
    button.test-btn { background: var(--accent); }
    button.submit-btn { background: #2ecc71; font-weight: bold; width: 100%; margin: 20px 0; font-size: 18px; display: none; }

    .word {
        background: white;
        margin: 10px 0;
        padding: 18px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .left-part { flex: 1; }
    .ru { font-size: 24px; font-weight: bold; color: #2c3e50; transition: 0.3s; }
    .cn { color: var(--success); font-size: 18px; font-weight: 600; margin-bottom: 8px; }

    .test-input {
        width: 95%;
        padding: 12px;
        font-size: 18px;
        border: 2px solid #ddd;
        border-radius: 6px;
        margin-top: 10px;
        outline: none;
    }

    /* çº é”™æ ·å¼ */
    .diff-result {
        margin-top: 10px;
        font-family: "Consolas", monospace;
        font-size: 18px;
        padding: 10px;
        background: #f9f9f9;
        border-radius: 6px;
        display: none;
    }
    .char-correct { color: var(--success); }
    .char-wrong { color: var(--error); text-decoration: underline; background: #fff0f0; font-weight: bold; }
    .char-missing { color: #aaa; border-bottom: 2px dashed #aaa; }

    #wrongBookSection {
        margin-top: 40px;
        padding: 20px;
        background: #fff0f0;
        border-radius: 12px;
        border: 2px solid var(--error);
        display: none;
    }
    
    .audio-btn {
        background: #f0f0f0;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 20px;
        margin-left: 15px;
    }
    .tip {
        margin: 15px 0;
        background: #fffbe6;
        padding: 12px;
        border-left: 6px solid #f1c40f;
        font-size: 14px;
        border-radius: 4px;
    }
</style>
</head>
<body>

<h1>ä¿„è¯­èƒŒå•è¯ Â· ç¬¬16è¯¾</h1>

<div class="tip" id="modeTip">
ğŸ’¡ å½“å‰æ¨¡å¼ï¼š<b>æµè§ˆæ¨¡å¼</b>ã€‚ç‚¹å‡»å·¦ä¾§å¯åˆ‡æ¢ç¿»è¯‘æ˜¾ç¤ºã€‚
</div>

<div class="controls">
    <button onclick="shuffleWords()">ğŸ”€ ä¹±åºæ’åˆ—</button>
    <button id="toggleModeBtn" class="test-btn" onclick="toggleMode()">âœï¸ è¿›å…¥é»˜å†™æ¨¡å¼</button>
    <span id="viewControls">
        <button class="secondary" onclick="toggleAll(true)">ğŸ‘ï¸ å…¨éƒ¨æ˜¾ç¤º</button>
        <button class="secondary" onclick="toggleAll(false)">ğŸ™ˆ å…¨éƒ¨éšè—</button>
    </span>
</div>

<div id="wordList" class="word-container"></div>

<button id="submitBtn" class="submit-btn" onclick="submitTest()">ğŸ“ å®Œæˆäº¤å·ï¼ŒæŸ¥çœ‹çº é”™ç»“æœ</button>

<div id="wrongBookSection">
    <h2 style="color: var(--error);">ğŸš© é”™é¢˜æ±‡æ€» (éœ€åŠ å¼ºè®°å¿†)</h2>
    <div id="wrongList"></div>
</div>

<script>
// åˆå§‹æ•°æ®
let wordData = [
    {ru: "ÑƒÑ‚Ñ€Ğ¾", cn: "æ—©æ™¨"}, {ru: "Ñ‡Ğ°ÑÑ‹", cn: "é’Ÿï¼›å°æ—¶"}, {ru: "Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑ‚ÑŒ", cn: "æ£€æŸ¥ï¼ˆæœªå®Œæˆä½“ï¼‰"},
    {ru: "Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ", cn: "æ£€æŸ¥ï¼ˆå®Œæˆä½“ï¼‰"}, {ru: "Ñ‚Ğ¾Ñ‡Ğ½Ğ¾", cn: "å‡†ç¡®åœ°ï¼›å‡†æ—¶"}, {ru: "Ğ½ÑƒĞ¶Ğ½Ğ¾", cn: "éœ€è¦ï¼›å¿…é¡»"},
    {ru: "Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ² â‰  Ğ±Ğ¾Ğ»ĞµĞ½", cn: "å¥åº·çš„ â‰  ç”Ÿç—…çš„"}, {ru: "Ğ²Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ â‰  Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ", cn: "è¿›å…¥ â‰  å‡ºå»"},
    {ru: "Ğ²Ğ¿ĞµÑ€ĞµĞ´Ğ¸ â‰  ÑĞ·Ğ°Ğ´Ğ¸", cn: "å‰é¢ â‰  åé¢"}, {ru: "ĞºĞ¾Ğ½Ñ‡Ğ°Ñ‚ÑŒÑÑ â‰  Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒÑÑ", cn: "ç»“æŸ â‰  å¼€å§‹"},
    {ru: "ÑĞ¿ĞµÑˆĞ¸Ñ‚ÑŒ", cn: "ç€æ€¥ï¼›èµ¶æ—¶é—´"}, {ru: "Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°", cn: "è½¦ç«™ï¼›ç«™ç‚¹"}, {ru: "Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°", cn: "å·¥ä½œ"},
    {ru: "Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹", cn: "å·¥ä½œçš„ï¼›å·¥äºº"}, {ru: "Ğ¾ÑĞµĞ½ÑŒ", cn: "ç§‹å¤©"}, {ru: "Ğ¾ÑĞµĞ½ÑŒÑ", cn: "åœ¨ç§‹å¤©"},
    {ru: "Ğ¾ÑĞµĞ½Ğ½Ğ¸Ğ¹", cn: "ç§‹å¤©çš„"}, {ru: "Ğ´ĞµĞ½ÑŒ", cn: "ç™½å¤©ï¼›ä¸€å¤©"}, {ru: "Ğ´Ğ¾Ğ¶Ğ´ÑŒ", cn: "é›¨"},
    {ru: "ÑĞ¾Ğ»Ğ½Ñ†Ğµ", cn: "å¤ªé˜³"}, {ru: "Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ", cn: "å¯èƒ½ï¼›ä¹Ÿè®¸"}, {ru: "Ğ½Ğ°Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ²", cn: "åœ¨â€¦â€¦å¯¹é¢"},
    {ru: "ÑĞ²ĞµÑ‚Ğ¸Ñ‚ÑŒ", cn: "ç…§è€€ï¼›å‘å…‰"}, {ru: "Ğ½ĞµĞ±Ğ¾", cn: "å¤©ç©º"}, {ru: "Ğ³Ğ¾Ğ»ÑƒĞ±Ğ¾Ğ¹", cn: "æµ…è“è‰²"},
    {ru: "Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹", cn: "ç»¿è‰²"}, {ru: "Ğ¶Ñ‘Ğ»Ñ‚Ñ‹Ğ¹", cn: "é»„è‰²"}, {ru: "Ğ´ĞµÑ€ĞµĞ²Ğ¾ / Ğ´ĞµÑ€ĞµĞ²ÑŒÑ", cn: "æ ‘ï¼ˆå•æ•° / å¤æ•°ï¼‰"},
    {ru: "ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ", cn: "ä¹°ï¼ˆå®Œæˆä½“ï¼‰"}, {ru: "Ğ¾Ğ´ĞµĞ¶Ğ´Ğ°", cn: "è¡£æœ"}, {ru: "ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹", cn: "ç»æµçš„"},
    {ru: "ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ÑÑ‚", cn: "ç»æµå­¦å®¶"}, {ru: "Ğ´Ñ€ÑƒĞ¶Ğ±Ğ°", cn: "å‹è°Š"}
];

let isTestMode = false;

// æ¸²æŸ“åˆ—è¡¨
function renderWords() {
    const list = document.getElementById('wordList');
    list.innerHTML = '';
    
    wordData.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'word';
        
        if (!isTestMode) {
            // æµè§ˆæ¨¡å¼å†…å®¹
            div.innerHTML = `
                <div class="left-part" onclick="toggleSingle(this)">
                    <div class="ru">${item.ru}</div>
                    <div class="cn" style="display:none">${item.cn}</div>
                </div>
                <div class="audio-btn" onclick="speak('${item.ru}')">ğŸ”Š</div>
            `;
        } else {
            // é»˜å†™æ¨¡å¼å†…å®¹
            div.innerHTML = `
                <div class="left-part">
                    <div class="cn">${item.cn}</div>
                    <input type="text" class="test-input" id="input-${index}" placeholder="æ‹¼å†™ä¿„è¯­å•è¯...">
                    <div id="diff-${index}" class="diff-result"></div>
                </div>
                <div class="audio-btn" onclick="speak('${item.ru}')">ğŸ”Š</div>
            `;
        }
        list.appendChild(div);
    });
}

// åŠŸèƒ½ï¼šåˆ‡æ¢æ¨¡å¼
function toggleMode() {
    isTestMode = !isTestMode;
    const btn = document.getElementById('toggleModeBtn');
    const viewControls = document.getElementById('viewControls');
    const submitBtn = document.getElementById('submitBtn');
    const tip = document.getElementById('modeTip');
    
    if (isTestMode) {
        btn.innerText = "ğŸ“– è¿”å›æµè§ˆæ¨¡å¼";
        viewControls.style.display = 'none';
        submitBtn.style.display = 'block';
        tip.innerHTML = "âœï¸ <b>é»˜å†™æ¨¡å¼</b>ï¼šæ‹¼å†™å®Œæˆåç‚¹å‡»æœ€ä¸‹æ–¹çš„ã€å®Œæˆäº¤å·ã€‘ã€‚";
    } else {
        btn.innerText = "âœï¸ è¿›å…¥é»˜å†™æ¨¡å¼";
        viewControls.style.display = 'inline';
        submitBtn.style.display = 'none';
        document.getElementById('wrongBookSection').style.display = 'none';
        tip.innerHTML = "ğŸ’¡ <b>æµè§ˆæ¨¡å¼</b>ï¼šç‚¹å‡»å·¦ä¾§å¯åˆ‡æ¢ç¿»è¯‘æ˜¾ç¤ºã€‚";
    }
    renderWords();
}

// åŠŸèƒ½ï¼šæäº¤æµ‹è¯•å¹¶çº é”™
function submitTest() {
    const wrongList = document.getElementById('wrongList');
    wrongList.innerHTML = '';
    let hasWrong = false;

    wordData.forEach((item, index) => {
        const inputEl = document.getElementById(`input-${index}`);
        const resDiv = document.getElementById(`diff-${index}`);
        const userInput = inputEl.value.trim();
        const correct = item.ru;

        resDiv.style.display = 'block';

        if (userInput.toLowerCase() === correct.toLowerCase()) {
            resDiv.innerHTML = `<span class="char-correct">âœ“ æ­£ç¡®</span>`;
        } else {
            hasWrong = true;
            resDiv.innerHTML = `âŒ çº é”™ï¼š${generateDiff(userInput, correct)}<br><small>æ­£ç¡®ï¼š${correct}</small>`;
            
            // æ·»åŠ è‡³é”™é¢˜æœ¬
            const wDiv = document.createElement('div');
            wDiv.className = 'word';
            wDiv.innerHTML = `<div><div class="cn">${item.cn}</div><div class="ru">${item.ru}</div></div>`;
            wrongList.appendChild(wDiv);
        }
    });

    if (hasWrong) {
        document.getElementById('wrongBookSection').style.display = 'block';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    } else {
        alert("ğŸ‰ å¤ªæ£’äº†ï¼å…¨éƒ¨æ‹¼å†™æ­£ç¡®ï¼");
    }
}

// æ–‡æœ¬æ¯”å¯¹ç®—æ³•
function generateDiff(user, target) {
    let html = "";
    const max = Math.max(user.length, target.length);
    for (let i = 0; i < max; i++) {
        const u = user[i];
        const t = target[i];
        if (u === t) html += `<span class="char-correct">${u || ''}</span>`;
        else if (u === undefined) html += `<span class="char-missing">${t}</span>`;
        else html += `<span class="char-wrong">${u}</span>`;
    }
    return html;
}

// åŸºç¡€åŠŸèƒ½ï¼šä¹±åº
function shuffleWords() {
    wordData.sort(() => Math.random() - 0.5);
    renderWords();
}

// åŸºç¡€åŠŸèƒ½ï¼šå•æ˜¾/å•éš
function toggleSingle(el) {
    const cn = el.querySelector('.cn');
    cn.style.display = (cn.style.display === 'none') ? 'block' : 'none';
}

// åŸºç¡€åŠŸèƒ½ï¼šå…¨æ˜¾/å…¨éš
function toggleAll(show) {
    document.querySelectorAll('.cn').forEach(cn => {
        cn.style.display = show ? 'block' : 'none';
    });
}

// åŸºç¡€åŠŸèƒ½ï¼šæœ—è¯»
function speak(text) {
    const msg = new SpeechSynthesisUtterance();
    msg.text = text;
    msg.lang = 'ru-RU';
    window.speechSynthesis.speak(msg);
}

// åˆå§‹åŒ–1
renderWords();
</script>

</body>
</html>
